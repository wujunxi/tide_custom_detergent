define(["zepto","exports"],function(c,a){var b="00",d="0004";a.AJAX_SUCC=b;a.NOT_LOGIN=d;a.findByAttr=function(k,g,j){var f,e,h;for(f=0,e=k.length;f<e;f++){h=k[f];if(h[g]==j){return h}}return null};a.ajax=function(f,i,j,k){if(!f||!f.url){c(i(false));return}var g=c.extend({url:"",cache:false,type:"get",data:{},dataType:"json",timeout:6000,jsonp:"",display:"系统繁忙，请稍后重试",async:true,handleError:false},f);var e="/error_receiver.html",h="/login.html?backurl="+encodeURI(top.location.href);c.ajax({url:g.url,cache:g.cache,type:g.type,data:g.data,dataType:g.dataType,timeout:g.timeout,async:g.async,success:function(o){var m,n,l;if(g.dataType.toLowerCase()==="json"){m=o.code;n=o.msg;l=o.uid}if(m!=b){c.get(e,{code:m,msg:n,display:g.display,url:g.url,data:g.data,uid:l||""});if(g.handleError){if(m==d){top.location.href=h}else{alert(n);if(j){j()}return}}}c(i(o))},error:function(l,n,m){if(j&&j!=""&&n!="timeout"){j()}else{if(k&&k!=""&&n=="timeout"){k()}else{if(n=="timeout"){alert("请求超时！")}}}c.get(e,{code:"-1",msg:"",display:"timeout or unknow error",url:g.url,data:g.data,uid:""})}})};a.fmoney=function(m){m=""+m;var g,f,e;if(!/^-?\d+$/.test(m)){throw"fmoney:error param!"}g=(m[0]=="-");if(g){m=m.substring(1)}f=m.length;if(f==1){e="0.0"+m}else{if(f==2){e="0."+m}else{var l,k,h;l=m.substr(0,f-2);k=m.substr(f-2,2);if(f<6){e=l+"."+k}else{h=l.split("");for(var j=h.length-3;j>0;j-=3){h.splice(j,0,",")}e=h.join("")+"."+k}}}return(g?"-":"")+e};a.getQueryObj=function(e){if(!e){e=window.location.search}return a.param2Obj(e,true)};a.obj2Param=function(f){var g="";for(var e in f){g+="&"+e+"="+encodeURIComponent(f[e].toString())}if(g!=""){g=g.substring(1,g.length)}return g};a.param2Obj=function(g,l){var i={};if(g!=null&&g!=undefined&&g!=""){g=g.replace(/\?/,"");var j=g.split("&");for(var k=0;k<j.length;k++){var h=j[k];var m=h.indexOf("=");if(m!=-1){var e=h.substring(0,m);var f="";if(m!=h.length-1){f=h.substring(m+1)}if(l){i[e]=decodeURIComponent(f)}else{i[e]=f}}else{i[h]=""}}}return i};a.tip=(function(){var h=false,f,g;var e={init:function(){if(h){return e}var i='<div style="display:block;width:100%;line-height:30px;position:fixed;top:0;color:#fff;background:#e44545;text-align:center;font-family:微软雅黑;-webkit-transition: opacity 2s linear;-moz-transition: opacity 2s linear;-o-transition: opacity 2s linear;transition: opacity 2s linear;opacity:0;z-index:10;"></div>';f=c(i).appendTo("body");h=true;return e},show:function(i){if(!h){this.init()}if(g){clearTimeout(g)}f.text(i).css("opacity","100");g=setTimeout(function(){f.css("opacity","0")},2000);return e}};return e})();a.tipError=function(e){a.tip.show(e)};a.touch=function(h,j){var e=c.extend({tolerance:0},j);var n,m;var f,l,k,o;f=l=k=o=function(){};c(h).on("touchstart",i);c(h).on("touchmove",i);c(h).on("touchend",i);var g={moveRight:function(p){f=p;return g},moveLeft:function(p){l=p;return g},swipeLeft:function(p){o=p;return g},swipeRight:function(p){k=p;return g}};return g;function i(r){var q=r.type,p=r.changedTouches[0].clientX,u=r.changedTouches[0].clientY,s;if(q=="touchstart"){n=p;m=u}else{if(q=="touchmove"){s=p-n;if(s>e.tolerance){f(r,s);r.preventDefault()}else{if(s<-e.tolerance){l(r,s);r.preventDefault()}}}else{if(q=="touchend"){s=p-n;if(s>e.tolerance){k(r,s)}else{if(s<-e.tolerance){o(r,s)}}}}}}};Date.prototype.Format=function(f){var g=f;var e=["日","一","二","三","四","五","六"];g=g.replace(/yyyy|YYYY/,this.getFullYear());g=g.replace(/yy|YY/,(this.getYear()%100)>9?(this.getYear()%100).toString():"0"+(this.getYear()%100));g=g.replace(/mm/,(this.getMonth()+1)>9?(this.getMonth()+1).toString():"0"+(this.getMonth()+1));g=g.replace(/m/g,this.getMonth());g=g.replace(/w|W/g,e[this.getDay()]);g=g.replace(/dd|DD/,this.getDate()>9?this.getDate().toString():"0"+this.getDate());g=g.replace(/d|D/g,this.getDate());g=g.replace(/hh|HH/,this.getHours()>9?this.getHours().toString():"0"+this.getHours());g=g.replace(/h|H/g,this.getHours());g=g.replace(/MM/,this.getMinutes()>9?this.getMinutes().toString():"0"+this.getMinutes());g=g.replace(/M/g,this.getMinutes());g=g.replace(/ss|SS/,this.getSeconds()>9?this.getSeconds().toString():"0"+this.getSeconds());g=g.replace(/s|S/g,this.getSeconds());return g}});